<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
</head>
<body>

<script type="text/javascript">
var arr=[1,2,3,'f',2,'s',1];
//var cloneArr1=arr.slice();
//var cloneArr2=arr.concat();
//console.log('为更改前：'+'\n'+arr+'\n'+cloneArr1+'\n'+cloneArr2); //是一样的

//为了方便看出来这里每个更改不同元素
//arr[0]='我是arr的第一项';
//cloneArr1[1]='我是cloneArr1的第二项';
//cloneArr2.push('我是cloneArr新添加');

//我们在打印一下看看
//console.log('为更改后：'+'\n'+arr+'\n'+cloneArr1+'\n'+cloneArr2);

	



//cloneArr.push('我是cloneArr');
//console.log('arr：'+arr);  //["小明", 2, 3, "f", 2, "s", 1, "我是cloneArr"]
//console.log('cloneArr：'+cloneArr);  //这个也变了 ["小明", 2, 3, "f", 2, "s", 1, "我是cloneArr"]

function fn2(age){
	alert(age);
}
var obj={
		name:'小明',
		age:18,
		tel:'13108123123',
		sex:'男',
		fn:function(name,a,b){
			this.name=name;
			this.fnn=function(a,b){
				console.log(a+b)
			}
		},
		fn2:fn2,
		obj2:{
			name:null,
			sex:'男',
			age:15
		},
		li:[1,null,0,23],
		lii:[1,2,3,4,45,[1,2,3,43,3,{name:'111',age:'1',e:[2,3,4,1,1,2],fnnc:function(){
			console.log(11);
		}}],3,2,]
	};

//用闭合函数实现
function clone(obj){
	//判断传入的值是否是object,不是的话return传入值
	if(typeof obj == 'object'){
		//判断是object 是不是数组 
		if(obj instanceof Array){
			let obj2=[]; //定义一个空数组
			//遍历数组
			for(let i=0;i<obj.length;i++){
				//如果值为null 
				if(obj[i] == null){
					obj2[i]= null;
					continue;
				}else if(typeof obj[i] == 'object'){
					obj2[i]=clone(obj[i]);//如果数组元素有object对象时在调用clone	
					continue;			
				}else if(typeof obj[i] == 'function'){
					obj2[i]=obj[i];  //如果是函数
					continue;
				}else{
					obj2[i]=obj[i]; //如果是字符串或数字等
				}
			}
			//返回 obj2
			return obj2;
		}else{
			//传入的是一个对象
			let obj2={};
			//遍历对象
			Object.keys(obj).forEach(function(key){
				//如果值为null 
				if(obj[key] == null){
					obj2[key]= null;
				}else if(typeof obj[key] == 'object'){
					obj2[key]=clone(obj[key]);//如果对象元素有object对象时在调用clone
				}else if(typeof obj[key] == 'function'){
					obj2[key]=obj[key]; //如果是函数
				}else{
					obj2[key]=obj[key]; //如果是字符串或数字等
				}
			});
			//返回 obj2
			return obj2;
		}
	}else{
		//如果不是object 放回传入值
		return obj;
	}
}
//我们来看一下复制的用时 平均 0.4~0.9 ms之前
console.time();
var cloneObj2=clone(obj);   //clone为自定义函数
console.timeEnd();


obj['name']='小红红红话';
obj['obj2']['name']='大红花那个大红花';
obj['lii'][5][1]='5656565';
obj['lii'][5][5]['name']='大红袍';

console.log(obj);  //都改变了
console.log(cloneObj2); //都没变

//我们在看看复制的函数的情况

cloneObj2['fn2'](16); //正常弹出16




	// cloneObj=Object.assign({},obj);
	//  console.log(obj);
	// console.log(cloneObj); //这里成功复制了
	// var c=new cloneObj['fn'];
	// c.fnn(2,3);
	// //我们改变一下试试

	// obj['name']='小红红';
	// obj['obj2']['name']='小明明';
	// obj['li'][1]=900;
	// console.log(obj); 
	// console.log(cloneObj); // 从打印结果来看，除了函数之外其他的都可以深度拷贝


// function fn1(age){
// 	alert(age);
// }
// var b="bbbbbbbb";
// var arr3=[1,2,3,4,5,6,7,['q','w','e','w'],8,{name:'小明',age:18,fn:function(name){alert(name);}},9,7,54,fn1,b];
// var cloneArr1=JSON.parse(JSON.stringify(arr3))
//console.log(arr3); //[1,2,3,4,5,6,7,['q','w','e','w'],8,{name:'小明',age:18,fn:function(name){alert(name);}},9,7,54,fn1,'bbbbbbbb'];
//console.log(cloneArr1); //[1,2,3,4,5,6,7,['q','w','e','w'],8,{name:'小明',age:18},9,7,54,null,'bbbbbbbb'];这是发现fn函数和函数名没有被复制上

//那我们改变一下值看一下
// arr3[0]=101;
// arr3[7][1]='qqqpppqqpp';
// arr3[9]['name']='飞上天';

// console.log(arr3); //[101,2,3,4,5,6,7,['q','qqqpppqqpp','e','w'],8,{name:'飞上天',age:18},9,7,54];
// console.log(cloneArr1); //这样好像可以 [1,2,3,4,5,6,7,['q','w','e','w'],8,{name:'小明',age:18},9,7,54];






//var arr3=[1,2,3,4,5,['a','c','d','m',['小明','小芳'],'w','o'],3,4,5,2];

</script>
</body>

</html>